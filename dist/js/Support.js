import{u as F,r as c,a as O,_ as j,j as e,b as C,c as P,d as U,e as N}from"./index.js";import{u as $,C as A}from"./ContentComponent.js";function q(){var g=$(),w=F(function(i){return i.content}),T=w.content;c.useEffect(function(){g(O("support"))},[g]);var D=c.useState(""),f=j(D,2),E=f[0],o=f[1],k=c.useState(""),v=j(k,2),x=v[0],m=v[1],I=c.useState({first_name:"",last_name:"",email:"",subject:"",message:""}),b=j(I,2),t=b[0],M=b[1],p=t.first_name,S=t.last_name,d=t.email,_=t.subject,y=t.msg,n=function(u){var s=u.target,l=s.name,r=s.value;M(C(C({},t),{},P({},l,r)))},R=function(){var i=U(N().mark(function u(){var s,l,r,h;return N().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("/wp-json/orb/v1/email/support",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({first_name:p,last_name:S,email:d,subject:_,message:y})});case 3:if(s=a.sent,s.ok){a.next=12;break}return a.next=7,s.json();case 7:throw l=a.sent,r=l.message,m(r),o("error"),new Error(r);case 12:return a.next=14,s.json();case 14:return h=a.sent,m(h.message),o("success"),setTimeout(function(){window.location.href="/support/success?first_name=".concat(encodeURIComponent(p),"&email=").concat(encodeURIComponent(d))},3e3),a.abrupt("return",h);case 21:throw a.prev=21,a.t0=a.catch(0),m(a.t0.message),o("error"),a.t0.message;case 26:case"end":return a.stop()}},u,null,[[0,21]])}));return function(){return i.apply(this,arguments)}}();return e.jsx(e.Fragment,{children:e.jsxs("main",{className:"support",children:[e.jsx(A,{content:T}),e.jsx("div",{className:"support-card card",children:e.jsx("form",{children:e.jsx("table",{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"text",name:"first_name",className:"input",id:"first_name",placeholder:"First Name",onChange:n,value:p})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"last_name",className:"input",id:"last_name",placeholder:"Last Name",onChange:n,value:S})})]}),e.jsx("tr",{children:e.jsx("td",{colSpan:2,children:e.jsx("input",{name:"email",type:"email",id:"support_email",className:"input",placeholder:"Email",onChange:n,value:d})})}),e.jsx("tr",{children:e.jsx("td",{colSpan:2,children:e.jsx("input",{name:"subject",type:"text",id:"support_subject",className:"input",placeholder:"Subject",onChange:n,value:_})})}),e.jsx("tr",{children:e.jsx("td",{colSpan:2,children:e.jsx("textarea",{name:"msg",type:"text",id:"support_message",placeholder:"Message",onChange:n,value:y})})}),e.jsx("tr",{children:e.jsxs("td",{colSpan:2,children:[e.jsx("input",{type:"hidden",name:"action",value:"thfw_email_support"}),e.jsx("button",{className:"sendmsg",id:"support_submit",name:"submit",type:"button",value:"submit",onClick:R,children:e.jsx("h3",{children:"SEND"})})]})})]})})})}),x&&e.jsx("div",{className:"status-bar card ".concat(E),children:e.jsx("span",{children:x})})]})})}export{q as default};
//# sourceMappingURL=Support.js.map
