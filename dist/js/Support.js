import{r as d,_ as h,j as e,d as y,e as I,f as M,h as C}from"./index.js";function O(){var N=d.useState(""),j=h(N,2),w=j[0],u=j[1],T=d.useState(""),g=h(T,2),f=g[0],m=g[1],D=d.useState({first_name:"",last_name:"",email:"",subject:"",message:""}),x=h(D,2),t=x[0],E=x[1],c=t.first_name,v=t.last_name,p=t.email,b=t.subject,S=t.msg,r=function(i){var s=i.target,l=s.name,n=s.value;E(y(y({},t),{},I({},l,n)))},k=function(){var _=M(C().mark(function i(){var s,l,n,o;return C().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("/wp-json/orb/v1/email/support",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({first_name:c,last_name:v,email:p,subject:b,message:S})});case 3:if(s=a.sent,s.ok){a.next=12;break}return a.next=7,s.json();case 7:throw l=a.sent,n=l.message,m(n),u("error"),new Error(n);case 12:return a.next=14,s.json();case 14:return o=a.sent,m(o.message),u("success"),setTimeout(function(){window.location.href="/support/success?first_name=".concat(encodeURIComponent(c),"&email=").concat(encodeURIComponent(p))},3e3),a.abrupt("return",o);case 21:throw a.prev=21,a.t0=a.catch(0),m(a.t0.message),u("error"),a.t0.message;case 26:case"end":return a.stop()}},i,null,[[0,21]])}));return function(){return _.apply(this,arguments)}}();return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"support",children:[e.jsx("div",{className:"support-card card",children:e.jsx("form",{children:e.jsx("table",{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"text",name:"first_name",className:"input",id:"first_name",placeholder:"First Name",onChange:r,value:c})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"last_name",className:"input",id:"last_name",placeholder:"Last Name",onChange:r,value:v})})]}),e.jsx("tr",{children:e.jsx("td",{colSpan:2,children:e.jsx("input",{name:"email",type:"email",id:"support_email",className:"input",placeholder:"Email",onChange:r,value:p})})}),e.jsx("tr",{children:e.jsx("td",{colSpan:2,children:e.jsx("input",{name:"subject",type:"text",id:"support_subject",className:"input",placeholder:"Subject",onChange:r,value:b})})}),e.jsx("tr",{children:e.jsx("td",{colSpan:2,children:e.jsx("textarea",{name:"msg",type:"text",id:"support_message",placeholder:"Message",onChange:r,value:S})})}),e.jsx("tr",{children:e.jsxs("td",{colSpan:2,children:[e.jsx("input",{type:"hidden",name:"action",value:"thfw_email_support"}),e.jsx("button",{className:"sendmsg",id:"support_submit",name:"submit",type:"button",value:"submit",onClick:k,children:e.jsx("h3",{children:"SEND"})})]})})]})})})}),f&&e.jsx("div",{className:"status-bar card ".concat(w),children:e.jsx("span",{children:f})})]})})}export{O as default};
//# sourceMappingURL=Support.js.map
