{"version":3,"file":"Support.js","sources":["../../src/views/Support.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport ContentComponent from '../views/components/ContentComponent';\n\nimport { getContent } from '../controllers/contentSlice';\n\nfunction SupportComponent() {\n  const dispatch = useDispatch();\n\n  const { content } = useSelector((state) => state.content);\n\n  useEffect(() => {\n    dispatch(getContent('support'));\n  }, [dispatch]);\n\n  const [messageType, setMessageType] = useState('');\n  const [message, setMessage] = useState('');\n\n  const [formData, setFormData] = useState({\n    first_name: '',\n    last_name: '',\n    email: '',\n    subject: '',\n    message: '',\n  });\n\n  const { first_name, last_name, email, subject, msg } = formData;\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value,\n    });\n  };\n\n  const handleSubmit = async () => {\n    try {\n      const response = await fetch('/wp-json/orb/v1/email/support', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          first_name: first_name,\n          last_name: last_name,\n          email: email,\n          subject: subject,\n          message: msg,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        const errorMessage = errorData.message;\n\n        setMessage(errorMessage);\n        setMessageType('error');\n        throw new Error(errorMessage);\n      }\n\n      const responseData = await response.json();\n\n      setMessage(responseData.message);\n      setMessageType('success');\n\n      setTimeout(() => {\n        window.location.href = `/support/success?first_name=${encodeURIComponent(\n          first_name\n        )}&email=${encodeURIComponent(email)}`;\n      }, 3000);\n\n      return responseData;\n    } catch (error) {\n      setMessage(error.message);\n      setMessageType('error');\n\n      throw error.message;\n    }\n  };\n\n  return (\n    <>\n      <main className=\"support\">\n        <ContentComponent content={content} />\n\n        <div className=\"support-card card\">\n          <form>\n            <table>\n              <tbody>\n                <tr>\n                  <td>\n                    <input\n                      type=\"text\"\n                      name=\"first_name\"\n                      className=\"input\"\n                      id=\"first_name\"\n                      placeholder=\"First Name\"\n                      onChange={handleInputChange}\n                      value={first_name}\n                    />\n                  </td>\n                  <td>\n                    <input\n                      type=\"text\"\n                      name=\"last_name\"\n                      className=\"input\"\n                      id=\"last_name\"\n                      placeholder=\"Last Name\"\n                      onChange={handleInputChange}\n                      value={last_name}\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td colSpan={2}>\n                    <input\n                      name=\"email\"\n                      type=\"email\"\n                      id=\"support_email\"\n                      className=\"input\"\n                      placeholder=\"Email\"\n                      onChange={handleInputChange}\n                      value={email}\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td colSpan={2}>\n                    <input\n                      name=\"subject\"\n                      type=\"text\"\n                      id=\"support_subject\"\n                      className=\"input\"\n                      placeholder=\"Subject\"\n                      onChange={handleInputChange}\n                      value={subject}\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td colSpan={2}>\n                    <textarea\n                      name=\"msg\"\n                      type=\"text\"\n                      id=\"support_message\"\n                      placeholder=\"Message\"\n                      onChange={handleInputChange}\n                      value={msg}></textarea>\n                  </td>\n                </tr>\n                <tr>\n                  <td colSpan={2}>\n                    <input\n                      type=\"hidden\"\n                      name=\"action\"\n                      value=\"thfw_email_support\"\n                    />\n                    <button\n                      className=\"sendmsg\"\n                      id=\"support_submit\"\n                      name=\"submit\"\n                      type=\"button\"\n                      value=\"submit\"\n                      onClick={handleSubmit}>\n                      <h3>SEND</h3>\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </form>\n        </div>\n\n        {message && (\n          <div className={`status-bar card ${messageType}`}>\n            <span>{message}</span>\n          </div>\n        )}\n      </main>\n    </>\n  );\n}\n\nexport default SupportComponent;\n"],"names":["SupportComponent","dispatch","useDispatch","_useSelector","useSelector","state","content","useEffect","getContent","_useState","useState","_useState2","_slicedToArray","messageType","setMessageType","_useState3","_useState4","message","setMessage","_useState5","first_name","last_name","email","subject","_useState6","formData","setFormData","msg","handleInputChange","e","_e$target","target","name","value","_objectSpread","_defineProperty","handleSubmit","_callee","response","errorData","errorMessage","responseData","_regeneratorRuntime","wrap","_context","prev","next","fetch","method","headers","body","JSON","stringify","sent","ok","json","Error","setTimeout","window","location","href","encodeURIComponent","concat","abrupt","t0","stop","jsx","Fragment","children","jsxs","className","ContentComponent","type","id","placeholder","onChange","colSpan","onClick"],"mappings":"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"}